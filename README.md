# Простой скрипт проверки быстродействия PHP

Работает со всеми версиями ПХП: от 4.4 до 7.1

## ChangeLog

@ 2017-05-06, v1.0.13

 * Поправили немного code-style (@ryr)
 * Добавили больше данных в тесты сериализации

@ 2017-04-21, v1.0.12

 * Правильная конвертация значений в единицы SI.
 * Считаем операции в секунду на МГц.
 * Обновил вывод - добавил заголовок столбцам

@ 2017-04-20, v1.0.11

 * Нагружаем процессор, чтобы определить MHz только если разница между
   значениями 'cpu MHz' и 'bogomips/2' большая.

@ 2017-04-20, v1.0.10

 * Тесты массивов теперь всегда включены, они больше не съедают много памяти
 * Добавлено определение CPU на Linux-системах, добавлен вывод операций на МГц
 * В выводе uname осталена только необходимая для сравнения информация
 * Обновлен README

@ 2017-04-06, v1.0.9

 * Поправлен подсчет операций в секунду для теста массивов

@ 2017-04-06, v1.0.8

 * Тесты, которых нет в php-4.4 вынесены в отдельный подключаемый файл

@ 2017-04-06, v1.0.7

 * Изменены названия функций-тестов для сортировки перед запуском
 * Обновлено форматирование вывода результатов тестов
 * Добавлены и обновлены тесты:
   - образение к определенныи и неопределенным переменным/ключам массива
   - исключения (exceptions)
   - к хешированию добавлен тест crypt
   - тест массивов разбит на три уровня - время выполнения то же, памяти занимает меньше

@ 2015-07-16, v1.0.6

 * Добавлены тесты: preg & serialize

@ 2015-07-02, v1.0.5

 * Добавлен тест простейшего копирования строк

@ 2015-07-02, v1.0.4

 * Добавлено увеличение лимита по памяти и времени выполнения

@ 2015-07-02, v1.0.3

 * Исправлено определение доступных функций, сделан пропуск тестов для них

@ 2015-07-02, v1.0.2

 * Добавлено еще больше функций, теперь требуется наличие mbstring и json модулей
 * Потребление памяти увеличено из-за тестирования массивов - нужно более 1Гб

@ 2015-07-01, v1.0.1

 * Добавлен вывод потребления памяти
 * Добавлены новые функции, увеличен размер проверочной строки

## Пример вывода скрпита

```
<pre>
<<< WARNING >>>
CPU is in powersaving mode? Set CPU governor to 'performance'!
Fire up CPU and recalculate MHz!
</pre>
<pre>
------------------------------------------------------------------------------
|                            PHP BENCHMARK SCRIPT                            |
------------------------------------------------------------------------------
Start:             : 2017-05-06 19:15:49
Server:            : Linux/4.4.0-78-generic x86_64
CPU:               :
             model : Intel(R) Core(TM) i5-6600K CPU @ 3.50GHz
             cores : 4
               MHz : 3805.976MHz
PHP version:       : 7.0.14-Ubuntu/16.04-SergeyD/9.3.1
Benchmark version: : 1.0.13
Platform:          : Linux
------------------------------------------------------------------------------
TEST NAME                       :     SECONDS |       OP/SEC |      OP/SEC/MHz
------------------------------------------------------------------------------
01_math                         :   3.144 sec | 445.33 kOp/s | 117.01  Ops/MHz
02_string_concat                :   0.395 sec |  35.45 MOp/s |   9.31 kOps/MHz
03_string_simple_functions      :   1.747 sec | 744.18 kOp/s | 195.53  Ops/MHz
04_string_multibyte             :   3.956 sec |  32.86 kOp/s |   8.63  Ops/MHz
05_string_manipulation          :   2.314 sec | 561.89 kOp/s | 147.63  Ops/MHz
06_regex                        :   1.903 sec | 683.00 kOp/s | 179.45  Ops/MHz
07_1_hashing                    :   2.014 sec | 645.40 kOp/s | 169.58  Ops/MHz
07_2_crypt                      :   1.030 sec |   9.71 kOp/s |   2.55  Ops/MHz
08_json_encode                  :   1.534 sec | 847.26 kOp/s | 222.61  Ops/MHz
09_json_decode                  :   1.904 sec | 682.91 kOp/s | 179.43  Ops/MHz
10_serialize                    :   1.173 sec |   1.11 MOp/s | 291.12  Ops/MHz
11_unserialize                  :   1.682 sec | 772.75 kOp/s | 203.03  Ops/MHz
12_array_fill                   :   0.524 sec |  51.51 MOp/s |  13.54 kOps/MHz
13_array_unset                  :   0.707 sec |  38.21 MOp/s |  10.04 kOps/MHz
14_loops                        :   1.761 sec | 215.81 MOp/s |  56.70 kOps/MHz
15_loop_ifelse                  :   1.266 sec |  71.09 MOp/s |  18.68 kOps/MHz
16_loop_ternary                 :   3.041 sec |  29.60 MOp/s |   7.78 kOps/MHz
17_1_loop_defined_access        :   0.563 sec |  35.51 MOp/s |   9.33 kOps/MHz
17_2_loop_undefined_access      :   3.848 sec |   5.20 MOp/s |   1.37 kOps/MHz
18_loop_exceptiontrycatch       :   2.176 sec |   1.84 MOp/s | 483.03  Ops/MHz
------------------------------------------------------------------------------
Total time:                     : 36.682 sec.
Current memory usage:           : 476.8 kb.
Peak memory usage:              : 227.44 Mb.
</pre>
```
